import{d as p,c as b,w as I,o as a,a as l,b as n,t as f,u as g,F as c,e as u,f as O,g as v}from"./vendor.d6ca9e56.js";const S=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))s(t);new MutationObserver(t=>{for(const i of t)if(i.type==="childList")for(const h of i.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function o(t){const i={};return t.integrity&&(i.integrity=t.integrity),t.referrerpolicy&&(i.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?i.credentials="include":t.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(t){if(t.ep)return;t.ep=!0;const i=o(t);fetch(t.href,i)}};S();const m=p({id:"complete-orders",state:()=>({orders:[]}),getters:{},actions:{addOrder(r){this.orders.push(r)}}}),d=p({id:"pending-orders",state:()=>({orders:[],regId:1,vipId:1}),getters:{},actions:{addOrder(){this.orders.push({name:`Regular ${this.regId}`,status:"waiting"}),this.regId++},addVipOrder(){if(this.orders.length&&!this.orders[0].name.includes("VIP"))this.orders.unshift({name:`VIP ${this.vipId}`,status:"waiting"}),this.vipId++;else if(!this.orders.length)this.orders.push({name:`VIP ${this.vipId}`,status:"waiting"}),this.vipId++;else if(this.orders.filter(r=>r.name.includes("Regular")).length>0){for(let r=0;r<this.orders.length;r++)if(this.orders[r].name.includes("Regular")){this.orders.splice(r,0,{name:`VIP ${this.vipId}`,status:"waiting"}),this.vipId++;break}}else this.orders.push({name:`VIP ${this.vipId}`,status:"waiting"}),this.vipId++},completeOrder(r){m().addOrder(r),this.orders.splice(this.orders.findIndex(o=>o.name===r),1)}}}),_=p({id:"bots",state:()=>({bots:[],id:0}),getters:{},actions:{addBot(){this.bots.push({botStatus:"AFK",id:this.id}),this.id++,this.checkForPending()},removeBot(){if(this.bots.length>0){const r=d();this.bots.pop();for(let e of r.orders)e.status=="preparing"&&this.bots.filter(o=>o.id==e.assignedTo).length<=0&&(e.status="waiting",e.assignedTo=`abandoned by bot ${e.assignedTo}`)}},markAsComplete(r,e){const o=d();for(let s of this.bots)if(s.id==r){s.botStatus="AFK";for(let t of o.orders)t.name==e.name&&o.completeOrder(t.name);return}},async getToWork(r){const e=d();let o;if(this.bots.filter(s=>s.botStatus==="AFK").length>0){for(let s of this.bots)if(s.botStatus=="AFK"){o=s.id;break}setTimeout(this.markAsComplete,1e4,o,r);for(let s of this.bots)s.id==o&&(s.botStatus=`Preparing ${r.name}`);for(let s of e.orders)s.name==r.name&&(s.status="preparing",s.assignedTo=o)}},checkForPending(){const r=d();for(let e of r.orders)e.status=="waiting"&&this.bots.filter(o=>o.botStatus=="AFK").length>0&&this.getToWork(e)}}}),y=n("h1",null,"Pending orders",-1),k={setup(r){const e=d(),o=_(),s=b({get(){return e.orders}});return I(s.value,async()=>{if(o.bots.length&&s.value.length&&o.bots.filter(t=>t.botStatus=="AFK").length>0)for(let t=0;t<e.orders.length;t++)e.orders[t].status=="waiting"&&o.getToWork(e.orders[t])}),(t,i)=>(a(),l(c,null,[y,n("p",null,f(g(s)),1)],64))}},P=n("h1",null,"Completed Orders",-1),$={setup(r){const e=m();return(o,s)=>(a(),l(c,null,[P,n("p",null,f(g(e).orders),1)],64))}},w=n("h1",null,"Bot Kitchen",-1),B={setup(r){const e=_();d();function o(){e.addBot()}function s(){e.removeBot()}return(t,i)=>(a(),l(c,null,[w,n("button",{onClick:o},"+ Bot"),n("button",{onClick:s},"- Bot"),n("p",null,f(g(e).bots),1)],64))}},A=n("h1",null,"Order here",-1),F={setup(r){const e=d();function o(){e.addOrder()}function s(){e.addVipOrder()}return(t,i)=>(a(),l(c,null,[A,n("button",{onClick:o},"New Normal Order"),n("button",{onClick:s},"New VIP Order")],64))}};const V={setup(r){return(e,o)=>(a(),l(c,null,[u(k),u($),u(B),u(F)],64))}};O(V).use(v()).mount("#app");
